<script src="geocode.js"></script>
<div class="profile-container">
  <%= render "navs/login_nav" %>
</div>

<script>
  var geocoder;
  var map;
  function initialize() {
      geocoder = new google.maps.Geocoder();
      var latlng = new google.maps.LatLng(37.7833, -122.4167);
      var mapOptions = {
        zoom: 8,
        center: latlng
      }
      map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

  }

  function codeAddress() {
    var address = document.getElementById('address').value;
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        map.setCenter(results[0].geometry.location);
        var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location
        });
      } else {
        alert('Geocode was not successful for the following reason: ' + status);
      }
    });
  } //codeAddress()
  google.maps.event.addDomListener(window, 'load', initialize);

</script>

<div class="splash">
  <div class="tutor-main">
    <form class="postcode u-pull-left">
      Finding Toturs near you?<br />
      <input id="address" type="textbox" value="94070">
      <br>
      <input type="button" value="Search" onclick="codeAddress()">
    </form>
    <div id="map-canvas" class="u-pull-right"></div>
  </div>
</div>

<div class="user-container">
  <% @tutors.each do |tutor| %>
    <div class="user" id="<%= tutor.id %>">
      <img src="<%= tutor.image %>" height="90" width="110">
      <p><%= tutor.first_name %></p>
      <p><%= tutor.description %></p>
      <button class="invitation">Send chat invitation</button>
      <%= button_to "Profile", profile_path(tutor), method: :get %>
    </div>
  <% end %>
</div>
</div>
